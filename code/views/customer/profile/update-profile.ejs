<!DOCTYPE html>
<html lang="en">

    <head>
        <%-include('../../shared/includes/head', { pageTitle: 'Profile' })%>
        <link rel="stylesheet" href="/styles/forms.css" />
        <link rel="stylesheet" href="/styles/auth.css" />
    </head>

    <body>
        <%-include('../../shared/includes/header')%>
        <main>
            <form class="logout-form" action="/profile/logout" method="POST">
                <input type="hidden" name="_csrf" value="<%=locals.csrfToken%>">
                <h2><%=user.name%></h2>
                <button class="btn btn-red">Logout</button>
            </form>
            <%if (inputData.errorMessage) {%>
            <div class="alert">
                <h2>Invalid Input</h2>
                <p><%=inputData.errorMessage%></p>
            </div>
            <%}%>
            <form class="cart main-form" action="/profile/update-profile/<%=user._id%>" method="POST">
            <input type="hidden" name="_csrf" value="<%=locals.csrfToken%>" />
            <p>
                <label for="email">E-Mail</label>
                <input type="email" id="email" name="email" value="<%=user.email%>" required />
            </p>
            <p>
                <label for="password">New Password</label>
                <input type="password" id="password" name="password" minlength="6" />
            </p>
            <p>
                <label for="fullname">Full Name</label>
                <input type="text" id="fullname" name="fullname" value="<%=user.name%>" required />
            </p>
            <p>
                <label for="street">Street</label>
                <input type="text" id="street" name="street" value="<%=user.address.street%>" required />
            </p>
            <p>
                <label for="postal">Postal Code</label>
                <input type="text" id="postal" name="postal" minlength="5" maxlength="5"
                    value="<%=user.address.postalCode%>" required />
            </p>
            <p>
                <label for="city">City</label>
                <input type="text" id="city" name="city" value="<%=user.address.city%>" required />
            </p>
            <div class="auth-action">
                <button class="btn btn-primary">Update Account</button>
            </div>
            </form>
        </main>
        <%-include('../../shared/includes/footer')%>
    </body>

</html>